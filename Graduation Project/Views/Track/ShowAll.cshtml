@model IEnumerable<ShowAllTrackViewModel>

@{
    ViewData["Title"] = "Available Tracks";
}

<section class="all-courses-section">
    <div class="all-courses-container">
        <div class="all-courses-intro-section text-center mb-3">
            <h2 class="all-courses-intro-title">Available Tracks</h2>
            <p class="all-courses-intro-text text-muted mb-3">
                Explore a wide range of career paths that we offer.
            </p>
            @if(User.IsInRole("Admin"))
            {
                <a asp-action="Add" class="btn btn-primary w-100 mx-auto" style="max-width: 220px;">
                    <i class="fas fa-plus me-2"></i> Add New Track
                </a>
            }
        </div>

        <div class="all-courses-row d-flex flex-wrap gap-4 justify-content-center mt-4">
            @foreach (var track in Model)
            {
                <div class="all-courses-card">
                    <!-- Image Section (Fixed Height) -->
                    <div class="card-image-container">
                        <img src="@track.ImageURL" alt="@track.Name"
                             class="card-image" />
                    </div>

                    <!-- Card Body with Strict Layout -->
                    <div class="card-body-container">
                        <!-- Title (Fixed Height) -->
                        <div class="card-title-container">
                            <h5 class="card-title">@track.Name</h5>
                        </div>

                        <!-- Description (Fixed Height with Scroll) -->
                        <div class="card-description-container">
                            <p class="card-description">
                                @(!string.IsNullOrWhiteSpace(track.Description) ? track.Description : "No description available.")
                            </p>
                        </div>

                        <!-- Info Section (Fixed Height) -->
                        <div class="card-info-container">
                            <p><strong>📘 Courses:</strong> @track.CourseCount</p>
                            <p><strong>⭐ Enrolled:</strong> @track.StudentCount</p>
                        </div>

                        <!-- Buttons Section (Fixed Height) -->
                        <div class="card-buttons-container">
                            <a asp-action="ShowByTrackID" asp-controller="Course"
                               asp-route-TrackID="@track.ID"
                               class="btn btn-primary">View Courses</a>

                            @if (User.IsInRole("Admin"))
                            {
                                <a asp-action="Edit" asp-route-id="@track.ID" class="btn btn-secondary">Edit</a>
                                <a asp-action="Delete" asp-route-id="@track.ID" class="btn btn-danger">Delete</a>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<style>
    /* Base Card Styling */
    .all-courses-card {
        width: 550px;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.3s ease;
        display: flex;
        flex-direction: column;
        height: 650px; /* Fixed total card height */
    }

        .all-courses-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

    /* Image Section */
    .card-image-container {
        height: 200px; /* Fixed image height */
        overflow: hidden;
    }

    .card-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    /* Card Body Container */
    .card-body-container {
        padding: 20px;
        display: flex;
        flex-direction: column;
        flex-grow: 1;
    }

    /* Title Section */
    .card-title-container {
        height: 50px; /* Fixed title height */
        display: flex;
        align-items: center;
        margin-bottom: 8px;
    }

    .card-title {
        margin: 0;
        font-size: 1.7rem;
        font-weight: 600;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    /* Description Section */
    .card-description-container {
        height: 130px; /* Fixed description height */
        margin-bottom: 30px;
        overflow-y: auto; /* Scroll if content overflows */
    }

    .card-description {
        margin: 0;
        color: #6c757d;
        line-height: 1.4;
    }

    /* Info Section */
    .card-info-container {
        height: 50px; /* Fixed info height */
        margin-bottom: 25px;
    }

        .card-info-container p {
            margin: 4px 0;
        }

    /* Buttons Section */
    .card-buttons-container {
        margin-top: auto;
        display: grid;
        gap: 8px;
    }

    .btn {
        width: 100%;
        padding: 8px 0;
        font-weight: 500;
        border-radius: 4px;
    }

    /* Responsive Adjustments */
    @@media (max-width: 768px) {
        .all-courses-card {
            width: 100%;
            max-width: 350px;
        }
    }
</style>
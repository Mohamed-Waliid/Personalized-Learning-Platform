@using Graduation_Project.ViewModels.Course
@model IEnumerable<ShowAllCourseViewModel>

@{
    ViewData["Title"] = "Courses";
}

<section class="all-courses-section">
    <div class="all-courses-container">
        <div class="all-courses-intro-section">
            <h2 class="all-courses-intro-title">Discover Your Potential</h2>
            <p class="all-courses-intro-text">
                Explore a wide range of courses designed to help you achieve your personal and
                professional goals. Our expert instructors and flexible learning options make it
                easy to fit education into your busy life.
            </p>
        </div>

        <div class="all-courses-search-container">
            <input type="text" id="courseSearch" class="all-courses-search-bar"
                placeholder="Search courses by title..." />
        </div>

        <div class="all-courses-row" id="coursesContainer">
            @foreach (var course in Model)
            {
                <div class="all-courses-card">
                    <img src="@course.ImagePath" alt="@course.Title" />
                    <div class="all-courses-card-body">
                        <h5 class="all-courses-card-title">@course.Title</h5>
                        <p class="all-courses-card-text">@course.Description</p>
                        <div class="all-courses-details">
                            <p><strong>👤 Instructor:</strong> @course.InstructorName</p>
                            <p><strong>📅 Duration:</strong> @course.Duration</p>
                            <p><strong>🎓 Level:</strong> @course.DifficultyLevel</p>
                            <p><strong>⭐ Enrolled:</strong> @course.EnrolledCount</p>
                        </div>
                        <a asp-action="Details" asp-controller="Course" asp-route-CourseID="@course.ID" class="all-courses-btn">View Course</a>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<script>
    const searchInput = document.getElementById('courseSearch');
    const coursesContainer = document.getElementById('coursesContainer');
    const courseCards = coursesContainer.getElementsByClassName('all-courses-card');

    searchInput.addEventListener('input', function () {
        const searchTerm = this.value.toLowerCase();

        Array.from(courseCards).forEach(card => {
            const titleElement = card.querySelector('.all-courses-card-title');
            const title = titleElement.textContent.toLowerCase();

            if (title.includes(searchTerm)) {
                card.style.display = ''; // Show the card
            } else {
                card.style.display = 'none'; // Hide the card
            }
        });
    });
</script>
